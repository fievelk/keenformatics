---
layout: post
title: How To display trailing zeros in Json within Spring 3 and Jackson
date: '2013-08-19T08:30:00.000+02:00'
author: fievelk
tags:
- Datatables
- JEE
- Spring 3
- Jackson
- How To
- Annotations
- Json
- java
modified_time: '2013-08-25T17:34:24.663+02:00'
thumbnail: http://4.bp.blogspot.com/-a4g9__oGzsI/Ugn63CP1loI/AAAAAAAAAOY/Iyl20gkhvA4/s72-c/jsontrailingzeros.png
blogger_id: tag:blogger.com,1999:blog-8196940592943844696.post-6674221681051011784
blogger_orig_url: http://keenformatics.blogspot.com/2013/08/how-to-display-trailing-zeros-in-json.html
excerpt: 'This post could be simply read as a revisitation of the one in which I explained <a href="{{ site.baseurl }}{% post_url 2013-08-05-how-to-format-dates-in-json-within %}">How To format dates in Json within Spring 3</a>. But since the problem to solve is different, I think it could be useful to write a new guide about it, even if the mechanics are quite the same.</p> <p>I recently discovered that <a href="http://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency">managing prices with floats is a bad idea</a>, so I decided to change all of my "float price" variables to a more efficient BigDecimal type.'
---

<section><p>This post could be simply read as a revisitation of the one in which I explained <a href="{{ site.baseurl }}{% post_url 2013-08-05-how-to-format-dates-in-json-within %}">How To format dates in Json within Spring 3</a>. But since the problem to solve is different, I think it could be useful to write a new guide about it, even if the mechanics are quite the same.</p> <p>I recently discovered that <a href="http://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency">managing prices with floats is a bad idea</a>, so I decided to change all of my "float price" variables to a more efficient BigDecimal type. I know, <a href="http://lemnik.wordpress.com/2011/03/25/bigdecimal-and-your-money/">the use of BigDecimals is controversial too</a>, but it presently  fits my needs, so I decided to use them in my web application.</p> </section><section><div class="separator" style="clear: both; text-align: center;"></div><a href="http://4.bp.blogspot.com/-a4g9__oGzsI/Ugn63CP1loI/AAAAAAAAAOY/Iyl20gkhvA4/s1600/jsontrailingzeros.png" imageanchor="1" style="clear: left; float: left; margin-bottom: 1em; margin-right: 1em;"><img border="0" height="235" src="http://4.bp.blogspot.com/-a4g9__oGzsI/Ugn63CP1loI/AAAAAAAAAOY/Iyl20gkhvA4/s320/jsontrailingzeros.png" width="320" /></a><p>Anyway, prices types are not what I'm going to talk about now. What I discovered when I tried to put my values in a table obtained via Json, is that Json automatically trims out trailing zeros after the decimal mark. This means that if you have to display a price like 1.20 dollars, you'll probably display 1.2 instead.</p> <p>So, what I needed was something that would have been able to pick up my BigDecimal from the model, format it in a string including trailing zeros, and pass it to my jsp as Json. All of this, using Spring and Jackson, a Java library for processing JSON.</p> <p>I assume you've got a <b>jsp</b> (i.e. itemslist.jsp), a <b>controller class</b> (i.e. ItemController.java) and a simple <b>java class</b> for the objects you want to manage in your Json call (e.g. Item.java). Plus, you should have enabled <b>Spring annotation based configuration</b> (see the reference links at the bottom of this post).</p> <section><h2f>The steps!</h2f> <ol> <li>Create a <b>PriceJsonSerializer</b> class (you can change the name depending on your needs) that extends JsonSerializer. Like this: <pre class="prettyprint"><br />public class PriceJsonSerializer extends JsonSerializer&lt;BigDecimal&gt; {<br /><br />  @Override<br />  public void serialize(BigDecimal value, JsonGenerator jgen, SerializerProvider provider) <br />    throws IOException, JsonProcessingException {<br />      jgen.writeString(value.setScale(2, BigDecimal.ROUND_HALF_UP).toString());<br />  }<br />}<br /></pre> <p>As you can see, the serialize method writes in a String format the BigDecimal, ensuring that it's scaled in order to display two digits after the decimal mark (you can customize this behaviour changing the setScale parameter "2" to a higher or lower number).</p> <p>As you can see, the serialize method sets up the format you want to use for your BigDecimal, writing it in a String format.</p> <p><strong>Important:</strong> this means that your object will reach the jsp in a String format. So if you want to perform client-side arithmetics calculations on your values (e.g., in javascript) you'll have to parse them back to a number format. For example, if you have two values a = 2 and b = 3 in your jsp, writing a + b will perform an append procedure between strings, not a sum, giving you 32 instead of 5! </p>  </li> <li>In <b>Item.java</b> class, insert the @JsonSerialize annotation above the date getters: <pre class="prettyprint"><br />@JsonSerialize(using=PriceJsonSerializer.class)<br />public BigDecimal getPrice() {<br /> return price;<br />}<br /><br />@JsonSerialize(using=PriceJsonSerializer.class)<br />public void setPrice(BigDecimal price) {<br /> this.price = price;<br />}<br /></pre> </li></ol><p>I hope this works for you as it does for me. If not, comment and we'll try to figure out a proper solution. Well, your comments are welcome in any way :)</p></section> <section><h2f id="referencesJsonBigDecimal">References</h2f><ul><li><a href="http://stackoverflow.com/questions/3730019/why-not-use-double-or-float-to-represent-currency">StackOverflow - Why not use Double or Float to represent currency?</a></li><li><a href="http://lemnik.wordpress.com/2011/03/25/bigdecimal-and-your-money/">Lemming technology blog - BigDecimal and your Money</a></li><li>Money stock picture: &copy; <a href="http://PPDigital.openphoto.net">Darren Hester</a> for <a href="http://openphoto.net/gallery/image/linkback/6269">openphoto.net</a></li></ul></section>
